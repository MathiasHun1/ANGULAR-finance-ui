<div class="page-title-container">
  <h1 class="page-title">Overview</h1>
</div>

@if (!balance()) {
<p class="h2 text-center py-5">Loading..</p>
} @else {

<!-- Total balance cards line -->
<div class="row g-3 mb-3">
  <div class="col-4">
    <div class="custom-card bg-grey-900 text-white">
      <h2 class="fs-7 fw-normal text-white">Current balance</h2>
      <p class="fs-3 fw-bold mb-0 pt-1">{{ balance()?.current | currency }}</p>
    </div>
  </div>

  <div class="col-4">
    <div class="custom-card">
      <h2 class="fs-7 fw-normal text-grey-500">Income</h2>
      <p class="fs-3 fw-bold mb-0 pt-1">{{ balance()?.income | currency }}</p>
    </div>
  </div>

  <div class="col-4">
    <div class="custom-card">
      <h2 class="fs-7 fw-normal text-grey-500">Expanses</h2>
      <p class="fs-3 fw-bold mb-0 pt-1">{{ balance()?.expenses | currency }}</p>
    </div>
  </div>
</div>

<section class="row">
  <div class="col-7">
    <!-- Pots -->
    <div class="custom-card mb-3">
      <div class="d-flex justify-content-between align-items-center pb-3">
        <h2 class="fs-5 fw-bold">Pots</h2>
        <a class="navlink" routerLink="/pots"
          >See Details
          <img class="ms-2" src="/images/icon-caret-right.svg" alt="" />
        </a>
      </div>

      <div class="row">
        <div class="col-6">
          <div
            class="custom-card position-relative bg-beige-100 py-3 text-center"
          >
            <p class="fs-7 text-grey-500 my-2">Total saved</p>
            <p class="fs-3 fw-bold m-0">${{ totalSavedPots() }}</p>
            <img class="pot-icon" src="/images/icon-pot.svg" alt="" />
          </div>
        </div>
        <div class="col-6">
          <div class="grid-container h-100">
            @let data = potsData(); @if (data && data.length >= 4) {

            <app-list-item
              [name]="data[0].name"
              [value]="data[0].total"
              [borderColor]="data[0].theme"
            />
            <app-list-item
              [name]="data[1].name"
              [value]="data[1].total"
              [borderColor]="data[1].theme"
            />
            <app-list-item
              [name]="data[2].name"
              [value]="data[2].total"
              [borderColor]="data[2].theme"
            />
            <app-list-item
              [name]="data[3].name"
              [value]="data[3].total"
              [borderColor]="data[3].theme"
            />
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Transactions -->
    <div class="custom-card">
      <div class="d-flex justify-content-between align-items-center pb-3">
        <h2 class="fs-5 fw-bold">Transactions</h2>
        <a class="navlink" routerLink="/transactions"
          >View All
          <img class="ms-2" src="/images/icon-caret-right.svg" alt="" />
        </a>
      </div>

      <div>
        <div class="list-group">
          @for (transaction of transactions(); track transaction) {
          <div class="list-group-item d-felx justify-content-between">
            <div class="d-flex align-items-center gap-3">
              <img
                class="avatar"
                [src]="transaction.avatar.replace('/assets', '')"
                alt=""
              />
              <p class="m-0 fs-7 fw-bolder">
                {{ transaction.name }}
              </p>
            </div>

            <div class="text-end">
              <p
                [ngClass]="{ 'text-green': transaction.amount > 0 }"
                class="fs-7 fw-bold mb-0"
              >
                {{ transaction.amount | currency }}
              </p>
              <p class="fs-8 text-grey-500 mb-0">
                {{ transaction.date | date }}
              </p>
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</section>
}
