<div class="page-title-container d-flex justify-content-between align-items-center">
  <h1 class="page-title">Budgets</h1>
  <button class="btn btn-dark p-3" (click)="openModal()">
    + Add new Budget
  </button>
</div>
@if (!dataLoaded()) {
<p class="h2 text-center py-5">Loading..</p>
} @else {

<div class="container p-0">
  <!-- Chart section -->
  <section class="diagram-section">
    <div class="custom-card d-flex flex-column flex-md-row flex-xl-column align-items-center gap-5">
      <app-chart></app-chart>

      <div class="w-100">
        <h2 class="h5 fw-bold">Spending Summary</h2>
        <ul class="list-group w-100">
          @for (budget of extendedBudgets(); track budget.category) {
          <li class="list-group-item w-100 px-0 py-3">
            <div class="custom-border" [style.borderColor]="budget.theme"></div>
            <div class="m-0 ps-4 fs-7 text-grey-500 d-flex justify-content-between align-items-center w-100">
              <span>{{ budget.category }}</span>
              <div>
                <span class="fs-7 fw-bold text-black ms-auto pe-2">${{ (budget.spentThisMonth * -1).toFixed(2) }}</span>
                of
                <span class="fs-8">${{ budget.maximum.toFixed(2) }}</span>
              </div>
            </div>
          </li>
          }
        </ul>
      </div>
    </div>
  </section>

  <!-- Cards Section -->
  <section class="d-flex flex-column gap-4">
    @for (budget of extendedBudgets(); track budget.category) {

    <app-budget-card [budget]="budget" />

    }
  </section>
</div>
}