<div class="page-title-container">
  <h1 class="page-title">Transactions</h1>
</div>

@if (!paginatedData()) {
<p class="h2 text-center py-5">Loading..</p>
} @else {

<div class="custom-card d-flex flex-column justify-content-between text-grey-500">
  <!-- INput fields -->
  <div class="input-section row pt-2 pb-3">
    <div class="col">
      <input type="text" class="form-control w-75" placeholder="Search transaction" [(ngModel)]="searchFieldValue" />
    </div>

    <div class="col row">
      <div class="col d-flex align-items-center text-nowrap gap-2">
        <label for="sortby">Sort by</label>
        <select id="sortby" class="form-select" [(ngModel)]="sortValue">
          <option value="date">Latest</option>
          <option value="dateReverse">Oldest</option>
          <option value="name">A - Z</option>
          <option value="nameReverse">Z - A</option>
          <option value="amount">Highest</option>
          <option value="amountReverse">Lowest</option>
        </select>
      </div>

      <div class="col d-flex align-items-center text-nowrap gap-2">
        <label for="category">category</label>
        <select id="category" class="form-select" [(ngModel)]="categoryValue">
          <option value="">All</option>
          @for (category of categories(); track category) {
          <option [value]="category">{{ category }}</option>
          }
        </select>
      </div>
    </div>
  </div>

  <div class="list-group">
    <div class="list-group-item">
      <span>Recipient/sender</span>
      <span>Category</span>
      <span>Transaction Date</span>
      <span class="amount">Amount</span>
    </div>

    <!-- Transaction elements -->

    @for (transaction of paginatedData(); track transaction.id) {
    <div class="transaction-item list-group-item">
      <div>
        <div class="avatar-container">
          <img class="avatar" [src]="transaction.avatar" alt="" class="profile-image rounded-circle" width="40"
            height="40" />
        </div>
        <span class="ms-2 fw-bold fs-6 text-black">
          {{ transaction.name }}
        </span>
      </div>

      <span> {{ transaction.category }} </span>
      <span> {{ transaction.date | date : "dd MMM yyyy" }} </span>
      <span class="amount" [ngClass]="{
          'text-green': transaction.amount >= 0,
          'text-black': transaction.amount < 0
        }">
        {{ transaction.amount | currency }}
      </span>
    </div>
    }
  </div>
  <!-- Pagination -->
  <nav aria-label="pagination controls" class="pt-4">
    <ul class="pagination d-flex justify-content-between">
      <li class="page-item" (click)="stepPrevPage()">
        <div class="page-link">
          <img class="arrow" src="/images/icon-caret-left.svg" alt="" />
          <span class="control-text">Previous</span>
        </div>
      </li>
      <!-- Pages -->
      <div class="d-flex">
        @for (number of pageNumbers(); track number) {
        <li class="page-item" (click)="stepToPage(number)">
          <span class="page-link" [ngClass]="{ active: number === currentPage() }">
            {{ number }}
          </span>
        </li>
        }
      </div>

      <li class="page-item" (click)="stepNextPage()">
        <div class="page-link">
          <span class="control-text">Next </span>
          <img class="arrow" src="/images/icon-caret-right.svg" alt="" />
        </div>
      </li>
    </ul>
  </nav>
</div>
}